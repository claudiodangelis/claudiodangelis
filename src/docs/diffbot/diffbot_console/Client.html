        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Client class / diffbot_console Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="diffbot_console" data-type="Client">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../diffbot_console.html">diffbot_console</a> &rsaquo; <a href="../diffbot_console/Client.html">Client</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>Client</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class Client extends BaseClient {
 final String token;
 Client(this.token);

 Future&lt;Article&gt; getArticle (String url, {bool meta:false, bool html:false,
   bool dontStripAds:false, int timeout, bool tags:false,bool comments:false,
   bool summary:false}) {

   Map params = {"meta":meta, "html":html, "dontStripAds":dontStripAds,
                 "timeout":timeout, "tags":tags, "comments":comments,
                 "summary":summary};
   String _queryString = getQueryString(params);
   String requestUrl = Uri.encodeFull(articleEndpoint + "?token=" + token +
       "&amp;url=" + url + _queryString);
   
   Map data = {};
   
   Completer&lt;Article&gt; completer = new Completer();
   new HttpClient().getUrl(Uri.parse(requestUrl))
     .then((HttpClientRequest req) {
       req.headers.add("User-Agent", "Diffbot Dart Client");
       req.close().then((HttpClientResponse resp){
         StringBuffer _responseBuffer = new StringBuffer();
         resp.transform(new Utf8Decoder()).listen((_data) {
           _responseBuffer.write(_data);
         }).onDone((){
           data = JSON.decode(_responseBuffer.toString());
           _responseBuffer.clear();
           // Process date
           if(data["error"] == null) {
             data["date"] = getDate(data["date"]);
             completer.complete(new Article(data));                        
           } else {
             completer.completeError(new ClientException(data["error"]));
           }
         });
       });
     });
   return completer.future;
 }
 
 Future&lt;Frontpage&gt; getFrontpage(String url, {int timeout}) {
   String _queryString = '';
   if(timeout != null) {
     _queryString = '&amp;timeout=' + timeout.toString();
   }
   String requestUrl = Uri.encodeFull(frontpageEndpoint + "?token=" + token +
       "&amp;url=" + url + _queryString + "&amp;format=json");
   
   Map _data = {};
   Map data = {};
   Completer&lt;Frontpage&gt; completer = new Completer();
   new HttpClient().getUrl(Uri.parse(requestUrl))
     .then((HttpClientRequest req) {
       req.headers.add("User-Agent", "Diffbot Dart Client");
       req.close().then((HttpClientResponse resp) {
         StringBuffer _responseBuffer = new StringBuffer();
         resp.transform(new Utf8Decoder()).listen((_incomingData) {
           _responseBuffer.write(_incomingData);
         }).onDone((){
           _data = JSON.decode(_responseBuffer.toString());
           _responseBuffer.clear();
           // Processing frontpage info:
           data["title"] =
               _data["childNodes"][0]["childNodes"][0]["childNodes"][0];
           
           data["sourceType"] =
               _data["childNodes"][0]["childNodes"][1]["childNodes"][0];
           
           data["sourceURL"] =
               _data["childNodes"][0]["childNodes"][2]["childNodes"][0];
           
           data["icon"] =
               _data["childNodes"][0]["childNodes"][3]["childNodes"][0];
           
           data["numItems"] = int.parse(
               _data["childNodes"][0]["childNodes"][4]["childNodes"][0]);
           
           // Processing items:
           // Creating a list: 
           data["items"] = [];
           var _tmpFpItem = {}; // A temporary frontpage item
           
           for(var i = 1; i &lt; _data["childNodes"].length; i++) {
             _tmpFpItem["title"] =
                 _data["childNodes"][i]["childNodes"][0]["childNodes"][0];
             
             _tmpFpItem["link"] =
                 _data["childNodes"][i]["childNodes"][1]["childNodes"][0];
             
             _tmpFpItem["pubDate"] = 
                 getDate(
                     _data["childNodes"][i]["childNodes"][2]["childNodes"][0]);
             
             _tmpFpItem["textSummary"] =
                 _data["childNodes"][i]["childNodes"][3]["childNodes"][0];
             
             try {
               _tmpFpItem["description"] =
                   _data["childNodes"][i]["childNodes"][4]["childNodes"][0];
             
             } catch(e) {
               _tmpFpItem["description"] = null;
             }
             
             _tmpFpItem["id"] = _data["childNodes"][i]["id"];
             _tmpFpItem["sp"] = _data["childNodes"][i]["sp"];
             _tmpFpItem["fresh"] = _data["childNodes"][i]["fresh"];
             _tmpFpItem["sr"] = _data["childNodes"][i]["sr"];
             _tmpFpItem["type"] = _data["childNodes"][i]["type"];
             _tmpFpItem["xroot"] = _data["childNodes"][i]["xroot"];
             
             data["items"].add(new FpItem(_tmpFpItem));
             _tmpFpItem = {};
           }
           
           // Complete:
           completer.complete(new Frontpage(data));
         });
       });
     });
   return completer.future;
 }
 
 Future&lt;Product&gt; getProduct(String url, {int timeout}) {
   String _queryString = '';
   if(timeout != null) {
     _queryString = '&amp;timeout=' + timeout.toString();
   }
   String requestUrl = Uri.encodeFull(productEndpoint + "?token=" + token +
       "&amp;url=" + url + _queryString);
   Map _data = {};
   Map data = {};
   Completer&lt;Product&gt; completer = new Completer();
   new HttpClient().getUrl(Uri.parse(requestUrl))
     .then((HttpClientRequest req) {
       req.headers.add("User-Agent", "Diffbot Dart Client");
       req.close().then((HttpClientResponse resp) {
         StringBuffer _responseBuffer = new StringBuffer();
         resp.transform(new Utf8Decoder()).listen((_incomingData) {
           _responseBuffer.write(_incomingData);
         }).onDone((){
           // qua comincia la danza
           Map _data = JSON.decode(_responseBuffer.toString());
           if(_data["error"] == null) {
             // Global response
             data["type"] = _data["type"];
             data["url"] = _data["url"];
             data["resovled_url"] = _data["resolved_url"];
             data["breadcrumb"] = _data["breadcrumb"];
             data["products"] = [];
             
             /* 
              * Product response, a note from diffbot documentation:
              * (ref: http://diffbot.com/products/automatic/product)
              * 
              * The Product API returns product details in the products array.
              * Currently extracted data will only be returned from a **single
              * product**. In the future the API will return information from
              * multiple products, if multiple items are available on the same
              * page.
              * 
              * */
             
             Map _prod = {};
             
             _prod["title"] = _data["products"][0]["title"];
             _prod["descrption"] = _data["products"][0]["description"];
             _prod["brand"] = _data["products"][0]["brand"];
             _prod["offerPrice"] = _data["products"][0]["offerPrice"];
             _prod["regularPrice"] = _data["products"][0]["regularPrice"];
             _prod["saveAmount"] = _data["products"][0]["saveAmount"];
             _prod["shippingAmount"] = _data["products"][0]["shippingAmount"];
             _prod["productId"] = _data["products"][0]["productId"];
             _prod["upc"] = _data["products"][0]["upc"];
             _prod["prefixCode"] = _data["products"][0]["prefixCode"];
             _prod["productOrigin"] = _data["products"][0]["productOrigin"];
             _prod["isbn"] = _data["products"][0]["isbn"];
             _prod["sku"] = _data["products"][0]["sku"];
             _prod["mpn"] = _data["products"][0]["mpn"];
             
             // Product media
             List&lt;ProductMedia&gt; _prodMedia = [];
             
             for(var i=0;i&lt;_data["products"][0]["media"].length; i++) {
               _prodMedia.add(
                   new ProductMedia(_data["products"][0]["media"][i]));
             }
             
             _prod["media"] = _prodMedia;
             data["products"].add(new ProductItem(_prod));

             completer.complete(new Product(data));
           } else {
             completer.completeError(new ClientException(_data["error"]));
           }
         });
       });
     });
   return completer.future;
 }
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../base_client/BaseClient.html">BaseClient</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>Client</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="">
<button class="show-code">Code</button>
new <strong>Client</strong>(String token) <a class="anchor-link" href="#"
              title="Permalink to Client.Client">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Creates a new <a class="crossref" href="../dart_core/Object.html">Object</a> instance.</p>
<p><a class="crossref" href="../dart_core/Object.html">Object</a> instances have no meaningful state, and are only useful
through their identity. An <a class="crossref" href="../dart_core/Object.html">Object</a> instance is equal to itself
only.</p>
<div class="docs-inherited-from">docs inherited from Object </div></div>
<pre class="source">
Client(this.token);
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field inherited"><h4 id="articleEndpoint">
<button class="show-code">Code</button>
final String         <strong>articleEndpoint</strong> <a class="anchor-link"
            href="#articleEndpoint"
            title="Permalink to Client.articleEndpoint">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div><div class="doc">
<pre class="source">
final String articleEndpoint = "http://www.diffbot.com/api/article"
</pre>
</div>
</div>
<div class="field inherited"><h4 id="frontpageEndpoint">
<button class="show-code">Code</button>
final String         <strong>frontpageEndpoint</strong> <a class="anchor-link"
            href="#frontpageEndpoint"
            title="Permalink to Client.frontpageEndpoint">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div><div class="doc">
<pre class="source">
final String frontpageEndpoint = "http://www.diffbot.com/api/frontpage"
</pre>
</div>
</div>
<div class="field inherited"><h4 id="productEndpoint">
<button class="show-code">Code</button>
final String         <strong>productEndpoint</strong> <a class="anchor-link"
            href="#productEndpoint"
            title="Permalink to Client.productEndpoint">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div><div class="doc">
<pre class="source">
final String productEndpoint = "http://api.diffbot.com/v2/product"
</pre>
</div>
</div>
<div class="field"><h4 id="token">
<button class="show-code">Code</button>
final String         <strong>token</strong> <a class="anchor-link"
            href="#token"
            title="Permalink to Client.token">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final String token
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getArticle">
<button class="show-code">Code</button>
Future&lt;<a href="../article/Article.html">Article</a>&gt; <strong>getArticle</strong>(String url, {bool meta: false, bool html: false, bool dontStripAds: false, int timeout, bool tags: false, bool comments: false, bool summary: false}) <a class="anchor-link" href="#getArticle"
              title="Permalink to Client.getArticle">#</a></h4>
<div class="doc">
<div class="inherited">
<p>The Article API is used to extract clean article text from news article
web pages.</p>
<div class="docs-inherited-from">docs inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div></div>
<pre class="source">
Future&lt;Article&gt; getArticle (String url, {bool meta:false, bool html:false,
 bool dontStripAds:false, int timeout, bool tags:false,bool comments:false,
 bool summary:false}) {

 Map params = {"meta":meta, "html":html, "dontStripAds":dontStripAds,
               "timeout":timeout, "tags":tags, "comments":comments,
               "summary":summary};
 String _queryString = getQueryString(params);
 String requestUrl = Uri.encodeFull(articleEndpoint + "?token=" + token +
     "&amp;url=" + url + _queryString);
 
 Map data = {};
 
 Completer&lt;Article&gt; completer = new Completer();
 new HttpClient().getUrl(Uri.parse(requestUrl))
   .then((HttpClientRequest req) {
     req.headers.add("User-Agent", "Diffbot Dart Client");
     req.close().then((HttpClientResponse resp){
       StringBuffer _responseBuffer = new StringBuffer();
       resp.transform(new Utf8Decoder()).listen((_data) {
         _responseBuffer.write(_data);
       }).onDone((){
         data = JSON.decode(_responseBuffer.toString());
         _responseBuffer.clear();
         // Process date
         if(data["error"] == null) {
           data["date"] = getDate(data["date"]);
           completer.complete(new Article(data));                        
         } else {
           completer.completeError(new ClientException(data["error"]));
         }
       });
     });
   });
 return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getFrontpage">
<button class="show-code">Code</button>
Future&lt;<a href="../frontpage/Frontpage.html">Frontpage</a>&gt; <strong>getFrontpage</strong>(String url, {int timeout}) <a class="anchor-link" href="#getFrontpage"
              title="Permalink to Client.getFrontpage">#</a></h4>
<div class="doc">
<div class="inherited">
<p>The Frontpage API takes in a multifaceted “homepage” and returns
individual page elements.  </p>
<div class="docs-inherited-from">docs inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div></div>
<pre class="source">
Future&lt;Frontpage&gt; getFrontpage(String url, {int timeout}) {
 String _queryString = '';
 if(timeout != null) {
   _queryString = '&amp;timeout=' + timeout.toString();
 }
 String requestUrl = Uri.encodeFull(frontpageEndpoint + "?token=" + token +
     "&amp;url=" + url + _queryString + "&amp;format=json");
 
 Map _data = {};
 Map data = {};
 Completer&lt;Frontpage&gt; completer = new Completer();
 new HttpClient().getUrl(Uri.parse(requestUrl))
   .then((HttpClientRequest req) {
     req.headers.add("User-Agent", "Diffbot Dart Client");
     req.close().then((HttpClientResponse resp) {
       StringBuffer _responseBuffer = new StringBuffer();
       resp.transform(new Utf8Decoder()).listen((_incomingData) {
         _responseBuffer.write(_incomingData);
       }).onDone((){
         _data = JSON.decode(_responseBuffer.toString());
         _responseBuffer.clear();
         // Processing frontpage info:
         data["title"] =
             _data["childNodes"][0]["childNodes"][0]["childNodes"][0];
         
         data["sourceType"] =
             _data["childNodes"][0]["childNodes"][1]["childNodes"][0];
         
         data["sourceURL"] =
             _data["childNodes"][0]["childNodes"][2]["childNodes"][0];
         
         data["icon"] =
             _data["childNodes"][0]["childNodes"][3]["childNodes"][0];
         
         data["numItems"] = int.parse(
             _data["childNodes"][0]["childNodes"][4]["childNodes"][0]);
         
         // Processing items:
         // Creating a list: 
         data["items"] = [];
         var _tmpFpItem = {}; // A temporary frontpage item
         
         for(var i = 1; i &lt; _data["childNodes"].length; i++) {
           _tmpFpItem["title"] =
               _data["childNodes"][i]["childNodes"][0]["childNodes"][0];
           
           _tmpFpItem["link"] =
               _data["childNodes"][i]["childNodes"][1]["childNodes"][0];
           
           _tmpFpItem["pubDate"] = 
               getDate(
                   _data["childNodes"][i]["childNodes"][2]["childNodes"][0]);
           
           _tmpFpItem["textSummary"] =
               _data["childNodes"][i]["childNodes"][3]["childNodes"][0];
           
           try {
             _tmpFpItem["description"] =
                 _data["childNodes"][i]["childNodes"][4]["childNodes"][0];
           
           } catch(e) {
             _tmpFpItem["description"] = null;
           }
           
           _tmpFpItem["id"] = _data["childNodes"][i]["id"];
           _tmpFpItem["sp"] = _data["childNodes"][i]["sp"];
           _tmpFpItem["fresh"] = _data["childNodes"][i]["fresh"];
           _tmpFpItem["sr"] = _data["childNodes"][i]["sr"];
           _tmpFpItem["type"] = _data["childNodes"][i]["type"];
           _tmpFpItem["xroot"] = _data["childNodes"][i]["xroot"];
           
           data["items"].add(new FpItem(_tmpFpItem));
           _tmpFpItem = {};
         }
         
         // Complete:
         completer.complete(new Frontpage(data));
       });
     });
   });
 return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getProduct">
<button class="show-code">Code</button>
Future&lt;<a href="../product/Product.html">Product</a>&gt; <strong>getProduct</strong>(String url, {int timeout}) <a class="anchor-link" href="#getProduct"
              title="Permalink to Client.getProduct">#</a></h4>
<div class="doc">
<div class="inherited">
<p>The Product API analyzes a shopping or e-commerce product page and returns
information on the product.</p>
<div class="docs-inherited-from">docs inherited from <a href="../base_client/BaseClient.html">BaseClient</a> </div></div>
<pre class="source">
Future&lt;Product&gt; getProduct(String url, {int timeout}) {
 String _queryString = '';
 if(timeout != null) {
   _queryString = '&amp;timeout=' + timeout.toString();
 }
 String requestUrl = Uri.encodeFull(productEndpoint + "?token=" + token +
     "&amp;url=" + url + _queryString);
 Map _data = {};
 Map data = {};
 Completer&lt;Product&gt; completer = new Completer();
 new HttpClient().getUrl(Uri.parse(requestUrl))
   .then((HttpClientRequest req) {
     req.headers.add("User-Agent", "Diffbot Dart Client");
     req.close().then((HttpClientResponse resp) {
       StringBuffer _responseBuffer = new StringBuffer();
       resp.transform(new Utf8Decoder()).listen((_incomingData) {
         _responseBuffer.write(_incomingData);
       }).onDone((){
         // qua comincia la danza
         Map _data = JSON.decode(_responseBuffer.toString());
         if(_data["error"] == null) {
           // Global response
           data["type"] = _data["type"];
           data["url"] = _data["url"];
           data["resovled_url"] = _data["resolved_url"];
           data["breadcrumb"] = _data["breadcrumb"];
           data["products"] = [];
           
           /* 
            * Product response, a note from diffbot documentation:
            * (ref: http://diffbot.com/products/automatic/product)
            * 
            * The Product API returns product details in the products array.
            * Currently extracted data will only be returned from a **single
            * product**. In the future the API will return information from
            * multiple products, if multiple items are available on the same
            * page.
            * 
            * */
           
           Map _prod = {};
           
           _prod["title"] = _data["products"][0]["title"];
           _prod["descrption"] = _data["products"][0]["description"];
           _prod["brand"] = _data["products"][0]["brand"];
           _prod["offerPrice"] = _data["products"][0]["offerPrice"];
           _prod["regularPrice"] = _data["products"][0]["regularPrice"];
           _prod["saveAmount"] = _data["products"][0]["saveAmount"];
           _prod["shippingAmount"] = _data["products"][0]["shippingAmount"];
           _prod["productId"] = _data["products"][0]["productId"];
           _prod["upc"] = _data["products"][0]["upc"];
           _prod["prefixCode"] = _data["products"][0]["prefixCode"];
           _prod["productOrigin"] = _data["products"][0]["productOrigin"];
           _prod["isbn"] = _data["products"][0]["isbn"];
           _prod["sku"] = _data["products"][0]["sku"];
           _prod["mpn"] = _data["products"][0]["mpn"];
           
           // Product media
           List&lt;ProductMedia&gt; _prodMedia = [];
           
           for(var i=0;i&lt;_data["products"][0]["media"].length; i++) {
             _prodMedia.add(
                 new ProductMedia(_data["products"][0]["media"][i]));
           }
           
           _prod["media"] = _prodMedia;
           data["products"].add(new ProductItem(_prod));

           completer.complete(new Product(data));
         } else {
           completer.completeError(new ClientException(_data["error"]));
         }
       });
     });
   });
 return completer.future;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-10-14 16:43:51.631</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
